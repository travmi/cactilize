# ************************** WARNING CACTILIZE ANSIBLE PLAYBOOK ********************************
# File Managed by Ansible
# Any changes to this file configuration should be done trough Ansible
# other wise configuration will be overwritten on the next Ansible cactilize deploy pass.
# **********************************************************************************************
<VirtualHost *:{{ PORT_HTTP }}>
        DocumentRoot "{{ cacti_root_dir }}"

        ServerName {{ domain_name }}

        ErrorLog logs/cacti_error.log
        CustomLog logs/cacti_access.log logstash_forwarded

        <Directory "{{ cacti_root_dir }}">
                Options +SymLinksIfOwnerMatch
                AllowOverride All
                AuthName "Provide credentials"
      	        AuthUserFile /etc/httpd/conf.d/.htpass_cacti
      	        AuthType Basic
      	        Require valid-user

                php_flag magic_quotes_gpc Off
                php_flag short_open_tag On
                php_flag register_globals Off
                php_flag register_argc_argv On
                php_flag track_vars On
                php_value mbstring.func_overload 0
                php_value include_path .

                DirectoryIndex index.php
        </Directory>

        <Directory ~ "{{ cacti_root_dir }}/(cli|\.boto|\.ssh|.*\.cnf)">
      	     <IfModule mod_rewrite.c>
      	             Redirect 404 /
      	     </IfModule>
      	     <IfModule !mod_rewrite.c>
      	             <IfModule mod_authz_core.c>
      	                     Require all denied
      	             </IfModule>
      	             <IfModule !mod_authz_core.c>
      	                     Order deny,allow
      	                     Deny from all
      	             </IfModule>
      	     </IfModule>
      	</Directory>
</VirtualHost>
